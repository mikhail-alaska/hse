
# Практическая работа №1 - Знакомство с ассемблером и разноязыковыми программами

- [Практическая работа №1 - Знакомство с ассемблером и разноязыковыми программами](#практическая-работа-1---знакомство-с-ассемблером-и-разноязыковыми-программами)
  - [Введение](#введение)
  - [Цель работы](#цель-работы)
  - [Задание](#задание)
  - [Часть 1: Основы программирования на ассемблере](#часть-1-основы-программирования-на-ассемблере)
    - [Задание к части лабораторной работы - знакомство с ассемблером](#задание-к-части-лабораторной-работы---знакомство-с-ассемблером)
    - [Варианты заданий к части "знакомство с ассемблером"](#варианты-заданий-к-части-знакомство-с-ассемблером)
  - [Часть 2: Комбинирование разноязыковых модулей](#часть-2-комбинирование-разноязыковых-модулей)
    - [Задание к части лабораторной работы "комбинирование разноязыковых модулей"](#задание-к-части-лабораторной-работы-комбинирование-разноязыковых-модулей)
    - [Варианты заданий к части "комбинирования разноязыковых модулей"](#варианты-заданий-к-части-комбинирования-разноязыковых-модулей)
  - [Форма представления отчетности](#форма-представления-отчетности)
  - [Защита работы](#защита-работы)
  - [Дополнительные задания](#дополнительные-задания)
  - [Ограничения системы оценивания](#ограничения-системы-оценивания)

## Введение

Все процессы в компьютере на самом низком, аппаратном уровне приводятся в действие только командами (инструкциями) машинного языка. Язык ассемблера – это символическое представление машинного языка. Ассемблер позволяет писать короткие и быстрые программы. Однако этот процесс чрезвычайно трудоёмкий. Для написания максимально эффективной программы необходимо хорошее знание особенностей команд языка ассемблера, внимание и аккуратность. Поэтому реально на языке ассемблера пишутся в основном программы, которые должны обеспечить эффективную работу с аппаратной частью. Также на языке ассемблера пишутся критичные по времени выполнения или расходованию памяти участки программы. Впоследствии они оформляются в виде подпрограмм и совмещаются с кодом на языке высокого уровня.

## Цель работы

1. Познакомиться со структурой программы на языке Ассемблер, разновидностями и назначением сегментов, способами организации простых и сложных типов данных, изучить форматы и правила работы с транслятором __MASM / FASM /TASM__, компоновщиком и отладчиком, познакомиться с средствами создания программ на Ассемблере для ОС Linux.

2. Исследование способов связывания разноязыковых модулей.

## Задание

__Лабораторная работа состоит из двух взаимосвязанных частей, выполняемых последовательно: [знакомство с ассемблером](#часть-1-основы-программирования-на-ассемблере) и [комбинирование разноязыковых модулей](#часть-2-комбинирование-разноязыковых-модулей)__

## Часть 1: Основы программирования на ассемблере

### Задание к части лабораторной работы - знакомство с ассемблером  

Для выполнения работы необходимо:

1. Повторно ознакомиться с теоретическим материалом.  
__Все настройки, действия и манипуляции, проводимые для выполнения заданий из пункта 2, необходимо фиксировать в отчёте в виде снимков экрана или листингов вводимых команд.__
2. С помощью языка программирования Ассемблер, используя любой синтаксис (Intel или AT&T) на свой выбор, необходимо написать программу, решающую задачу из варианта. При этом:
   1. Решением задачи является запись в специально объявленную для этого переменную верного результата при любых допустимых входных данных.
   2. Программа должна корректно завершаться, не вызывая аварийный останов.
   3. Объявлять входные данные необходимо самостоятельно в секции данных. Например, если в задаче указано «дан массив из 10 байт», в секции данных необходимо самостоятельно объявить такой массив, заполнить его байтами на своё усмотрение и использовать в качестве входного. В ходе защиты может возникнуть необходимость изменения таких данных.
   4. Для выполнения повторяющихся однотипных действий необходимо использовать соответствующие средства языка. Копирование и вставка одного и того же кода нужное количество раз с незначительными изменениями без необходимости является ошибкой.
   5. Программа должна выдавать корректный ответ для всех видов входных данных, описанных в задании. Например, если в задании написано «дан массив из 10 байт», то входными данными может быть массив из любых 10 значений от 0 до 255. Учитывайте возможные переполнения!
   6. При выполнении (в т.ч. дополнительных заданий) нельзя вызывать готовые ассемблерные подпрограммы из каких-либо библиотек и модулей.

### Варианты заданий к части "знакомство с ассемблером"

| №  | Задание |
|----|----------|
| 1  | Дано __двойное слово__. Найти количество единиц в его двоичной записи. Результат поместить в отдельный элемент данных. |
| 2  | Дано __двойное слово__. Найти количество нулей в его двоичной записи. Результат поместить в отдельный элемент данных. |
| 3  | Дан массив из 10 __слов__. Найти сумму остатков от деления каждого из них на 3. Результат поместить в отдельный элемент данных. |
| 4  | Дан массив из 10 __слов__ (значения не больше $2^{12}$). Первые два заполнены, остальные пусты (нули). Начиная с третьего элемента, заполнить каждый элемент массива суммой двух предыдущих. |
| 5  | Дан массив из 10 __слов__ (значения не больше $2^{12}$). Найти сумму нечётных элементов массива. Результат поместить в отдельный элемент данных. |
| 6  | Дан массив из 10 __слов__. В результирующую переменную поместить 1, если в массиве одинаковое количество чётных и нечётных элементов. Иначе в результирующую переменную поместить 0. |
| 7  | Дан массив из 10 __двойных слов__. В результирующую переменную поместить 1, если массив является симметричным, то есть его первая половина является обратной записью элементов его второй половины. Иначе в результирующую переменную поместить 0. |
| 8  | Дан __байт__. В результирующую переменную поместить его биты в обратном порядке (например, было __0b11110000__ стало __0b00001111__). |
| 9  | Дано __слово__. Найти, сколько раз происходит смена бита (с 1 на 0 или с 0 на 1) в двоичной записи этого слова. Результат поместить в отдельный элемент данных. |
| 10 | Дано двойное __слово__. В результирующую переменную поместить его биты в обратном порядке (например, было __0xFFFF0000__ стало __0x0000FFFF__). |
| 11 | Дано __слово__. В результирующую переменную поместить 1, если в его двоичной записи одинаковое количество 0 и 1, иначе в результирующую переменную поместить 0. |
| 12 | __Дано слово__. Найти максимальное количество идущих подряд единиц в двоичной записи этого слова. Результат поместить в отдельный элемент данных. |
| 13 | __Дано двойное слово__. Найти максимальное количество идущих подряд нулей в двоичной записи этого слова. Результат поместить в отдельный элемент данных. |
| 14 | Дан массив из 10 __байт__. Инвертировать биты старшей половины каждого из __байт__. |
| 15 | Дан массив из 10 __слов__ (значения не больше $2^{12}$). Найти сумму его элементов, стоящих на чётных позициях. Результат поместить в отдельный элемент данных. |
| 16 | Дан массив из 10 __двойных слов__. Массив изначально заполнен нулями. Поместить в каждый из элементов квадрат номера его позиции. |

## Часть 2: Комбинирование разноязыковых модулей

### Задание к части лабораторной работы "комбинирование разноязыковых модулей"

Для выполнения работы необходимо:
1. Повторно ознакомиться с теоретическим материалом !.
__Внимание! Все настройки, действия и манипуляции, проводимые для выполнения заданий из последующих пунктов, необходимо фиксировать в отчёте в виде снимков экрана или листингов вводимых команд.__
2. С помощью языков программирования C и Ассемблер, используя любой синтаксис (Intel или AT&T) на свой выбор, необходимо написать программу, решающую задачу из варианта.
   1. Входные данные для задач, основная часть которых подразумевает обработку чисел, а не их создание, должны генерироваться автоматически с помощью ГПСЧ языка Си. Сгенерированные исходные данные должны быть выведены в консоль.  
   2. При случайной генерации чисел пользователю должна предоставляться __возможность ограничить диапазон__ значений этих чисел.
   3. Решением задачи является вывод в консоль верного результата при любых допустимых входных данных.
   4. Программа должна корректно завершаться, не вызывая аварийный останов.
   5. В программе на языке С должен быть реализован только следующий функционал: выделение памяти под исходные данные (и их инициализация в случаях, когда она должна быть произведена с помощью  ГПСЧ, или ввод  данных), вызов  подпрограммы, выполняющей основные вычисления, вывод результата вычислений в консоль. __Все основные вычисления должны быть оформлены в виде ассемблерного модуля (не ассемблерной вставки в код на Си, а именно отдельного файла на языке Assembler).__
   6. Для выполнения повторяющихся однотипных действий необходимо использовать соответствующие средства языка. Копирование и вставка одного и того же кода нужное количество раз с незначительными изменениями без необходимости является ошибкой. 
   7. Все программы должны работать с любыми размерами входных данных. Размер входных данных (даже если сами данные генерируются случайно)должен задаваться пользователем посредством ввода с командной строки. __Запрещается ограничивать максимальный размер входных данных__.

### Варианты заданий к части "комбинирования разноязыковых модулей"

Комментарии к заданиям:  

В задачах, которые содержат обработку чисел, необходимо использовать машинные слова (целые числа длиной 32 бита, типы данных __int32_t__ для знаковых и __uint32_t__ для беззнаковых).  
Задачи, в которых встречается формулировка наподобие «наибольший (наименьший) элемент», подразумевают, что можно реализовать поиск наибольшего или наименьшего элемента на своё усмотрение.

| №  | Задача |
|----|--------|
| 1 | Напишите программу, в которой создается квадратная матрица (реализуется через двумерный массив). Матрица заполняется случайными числами, после чего выполняется «поворот по часовой стрелке»: инвертированный первый столбец становится первой строкой, инвертированный второй столбец становится второй строкой, и так далее. |
| 2 | Напишите программу, в которой создается и заполняется натуральными числами (1, 2, 3 и далее), поочерёдно возведёнными во вторую или третью степень, двумерный массив. Заполнение начинается с левого верхнего элемента слева направо, сверху вниз (то есть заполняется сначала первая строка, затем вторая, и так далее). Поочерёдное возведение во вторую или третью степень означает, что первый элемент возводится во вторую степень, второй – в третью, третий – снова во вторую, четвёртый – снова в третью и т.д. |
| 3 | Напишите программу, в которой создается двумерный числовой массив и для этого массива вычисляется сумма квадратов его элементов. |
| 4 | Напишите программу, в которой для одномерного массива беззнаковых чисел вычисляется наибольший (наименьший) элемент по модулю 32 и позиция, на которой элемент находится в массиве (результатом является позиция элемента). |
| 5 | Напишите программу, в которой создается два массива. Массивы заполняются случайными числами (в ручную или через генератор). Затем создается третий динамический массив, его размер равен сумме размеров первых двух массивов. Третий массив заполняется так: сначала в него подряд записываются значения элементов первого массива, а затем значения элементов второго массива. |
| 6 | Напишите программу, в которой для двумерного массива знаковых чисел вычисляется наибольший (наименьший) по абсолютному значению элемент и позиция, на которой элемент находится в массиве (результатом является массив из трёх чисел: сам элемент, номер его строки и номер его столбца). |
| 7 | Напишите программу для вычисления произведения прямоугольных матриц (количество строк и столбцов в матрицах различное). Перемножаются матрицы A (размерами $m$ на $n$) и B (размерами $n$ на $l$). Результатом является матрица $C$ (размерами $m$ на $l$). Рабочая формула для вычисления значений матрицы C имеет вид $C_{ij} = \sum_{i=1}^{n}(a_{it}  b_{tj})$, где $i = 1,2,...,m$ и $j = 1,2,...,l$. |
| 8 | Напишите программу, в которой создается символьный массив для записи текста (необходимо реализовать возможность ввода текста с консоли или из файла). Подсчитать для записанного в массиве текста количество слов и длину каждого слова. Словами следует считать любой набор символов между пробелами или пробельными символами (табуляция, конец строки или перевод строки). Результатом является массив из длин слов, завершающихся 0. |
| 9 | Напишите программу, в которой создается три одномерных числовых массива одинакового размера. Первые два массива заполняются случайными числами (можно вручную). Третий массив заполняется так: сравниваются элементы с одинаковыми индексами в первом и втором массиве и в третий массив на такую же позицию записывается большее (или меньшее) из сравниваемых значений. |
| 10 | Напишите программу, в которой создается два массива одинакового размера. Массивы заполняются случайными числами. Затем создается третий динамический массив, его размер в два раза больше размера каждого из первых двух массивов. Третий массив заполняется поочередной записью элементов из первых двух массивов: сначала записывается значение элемента первого массива, затем значение элемента второго массива, затем снова первого и снова второго, и так далее. |
| 11 | Напишите программу, в которой создается двумерный числовой массив. Массив заполняется случайными числами. На его основе создается новый массив, который получается «вычеркиванием» из старого одной строки и одного столбца. Номера «вычеркиваемых» столбца и строки определяются вводом с клавиатуры или с помощью генератора случайных чисел. |
| 12 | Напишите программу для вычисления среднего значения сумм строк прямоугольной числовой матрицы, округлённое вниз до целого (отсечением дробной части). |
| 13 | Напишите программу, в которой создается квадратная матрица (реализуется через двумерный массив). Матрицу необходимо заполнить числовыми значениями (способ заполнения выбрать самостоятельно), а затем выполнить транспонирование матрицы: матрица симметрично «отражается» относительно главной диагонали, в результате чего элемент матрицы $a_{ij}$ становится элементом $a_{ji}$ и наоборот. |
| 14 | Напишите программу, в которой создается символьный массив для записи текста (байтов). В массив записывается текст или байты, после чего необходимо изменить порядок следования пар символов в тексте на противоположный: последняя пара символов становится первой, предпоследняя – второй и так далее. Если в массиве нечётное количество символов, последний символ становится первым, а остальные пары меняются по приведённому принципу. |
| 15 | Напишите программу для вычисления среднего значения сумм столбцов прямоугольной числовой матрицы, округлённое вниз до целого (отсечением дробной части). |
| 16 | Напишите программу, в которой создается двумерный числовой массив и для этого массива вычисляется сумма квадратов его элементов, каждый из которых приведён по модулю номера строки, в которой находится (начиная с 1). |
| 17 | Напишите программу, в которой для двумерной квадратной числовой матрицы вычисляется след – сумма диагональных элементов матрицы. |
| 18 | Напишите программу, в которой для двумерного числового массива вычисляется сумма его наибольшего и наименьшего элемента. |
| 19 | Напишите программу, в которой создается одномерный числовой массив. После заполнения значениями (случайными числами) массива в нем нужно выполнить циклическую перестановку элементов. Количество позиций для циклической перестановки вводится пользователем с клавиатуры. |
| 20 | Напишите программу, в которой создается и заполняется числами Фибоначчи двумерный массив (гарантируется, что размер массива будет задан так, что последнее число Фибоначчи будет не длиннее 32 бит). Заполнение начинается с левого верхнего элемента сверху вниз, слева направо (то есть заполняется сначала первый столбец, затем второй и так далее). |
| 21 | Напишите программу, в которой создается квадратная матрица. Изначально матрица заполняется случайными значениями. Элементам на обеих диагоналях присваиваются единичные значения, все остальные элементы нулевые. |
| 22 | Напишите программу, в которой создается двумерный массив. Размер массива задаётся пользователем. Заполнить массив «симметричными» значениями: первый элемент первой строки и последний элемент последней строки получают значение 1, второй элемент первой строки и предпоследний элемент последней строки получают значение 2, и так далее (когда первая и последняя строки заканчиваются, начинается заполнение второй и предпоследней). |
| 23 | Напишите программу, в которой создается символьный массив для записи текста. В массив записывается текст в кодировке ASCII, после чего необходимо произвести инверсию регистра буквенных символов – все заглавные буквы должны стать строчными, все строчные – заглавными. |
| 24 | Напишите программу, в которой создается одномерный числовой массив. После заполнения значениями (например, случайными числами) массива в нем нужно заменить все вхождения числа a на число b. Числа a и b вводятся пользователем с клавиатуры. |
| 25 | Напишите программу, в которой создается двумерный числовой массив и для этого массива вычисляется сумма остатков от деления его элементов на номер столбца, в котором этот элемент находится. |

## Форма представления отчетности

Оформить отчёт в соответствии с требованиями по оформлению отчёта из SmartLMS. Не забыть прикрепить к отчёту исходный код __всей программы в виде приложения__. В отчёте необходимо отразить следующие пункты:  

- Результаты работы программы в виде верных значений результирующих переменных.
- Процесс сборки и запуска программы в отладчике.  
- Словесное описание алгоритма решения поставленной задачи с листингами соответствующего кода.  
- Изменения ключевых значений (в регистрах и переменных) в ходе работы программы.  

## Защита работы

Защитить работу на занятии. Во время защиты необходимо:

- Продемонстрировать работу программы в отладчике (SASM, gdb или любом другом на ваш выбор).
- При необходимости изменить входные данные и продемонстрировать, что программа отрабатывает верно на новых данных.
- Ответить на вопросы по логике работы программы (почему и зачем была написана та или иная строка, каково её назначение и вклад в решение данной задачи, что будет, если её убрать).
- Ответить на вопросы по теоретической части. Внимание! Вопросы по теоретической части будут браться из материалов семинаров и лекции.

## Дополнительные задания

- Дополнительное задание 1: вывести результирующий элемент данных в консоль (в окно «вывод» в IDE), используя только команды «чистого» ассемблера (не вызывая подпрограммы, написанные не самостоятельно, наподобие printf). Даёт два дополнительных балла. __Не обязательно к выполнению!__
- Дополнительное задание 2: выполнить все поставленные задачи, написав две программы с использованием обоих синтаксисов (Intel и AT&T). Даёт один дополнительный балл. __Не обязательно к выполнению!__
- Дополнительное задание 3: скомбинировать разноязыковые модули для ОС Linux и ОС Windows, используя любой компилятор, кроме GCC/G++ (а также иных средств, входящих в пакет GCC), и синтаксис Intel. При выполнении данного задания необходимо подробно пошагово отразить все этапы в отчёте. Даёт два дополнительных балла. __Не обязательно к выполнению!__

## Ограничения системы оценивания

__В случае, если сумма набранных баллов превышает 10, в качестве результирующей оценки выставляется 10 баллов. Дополнительные бонусы за превышение максимального количества баллов не предусмотрены.__

